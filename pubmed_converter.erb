<%
def c(str)
  if str.nil?
    ""
  else
    str.chomp.gsub("\n", ' ').gsub("\"", '\"')
  end
end

def check(str)
  if (str && !str.empty?) then
    true
  else
    false
  end
end
%>


pubmed:<%= pmid %>
  bibo:pmid "<%= pmid %>";
  dcterms:identifier "<%= pmid %>" ;
<% if check(ab) %>  bibo:abstract "<%=c ab %>";<% end %>
<% if check(ci) %>  dcterms:rights "<%=c ci %>";<% end %>
<% if check(aid_pii) %>  fabio:hasPII "<%=aid_pii %>";<% end %>
<% if check(aid_doi) %>  prism:doi "<%=aid_doi%>";<% end %>
<% if au_list.size != 0 %>  dcterms:creator [
    a olo:OrderedList ;
    olo:length <%=au_list.size%> ;
    olo:slot <% au_list.each_with_index do |au_info , index| %>[
      olo:index <%=au_info.index%>;
      olo:item [
        a foaf:Person;
        foaf:name "<%=au_info.lname%> <%=au_info.init%>";
        foaf:firstName "<%=c au_info.fname%>";
        foaf:LastName "<%=c au_info.lname%>"<% if !au_info.ad.empty? %>;
        org:memberOf "<%=c au_info.ad%>"<% end %><% if !au_info.auid.empty? %>;
        rdfs:seeAlso "<%=c au_info.auid%>"<% end %>
      ]
<%if index == au_list.size - 1  %>    ]<% else %>    ],<% end %><% end %>
  ];<% end %>
<% if check(cn) %>  dcterms:creator "<%=cn %>";<% end %>
<% if check(crdt) %>  dcterms:created "<%=crdt %>";<% end %>
<% if check(lr) %>  fabio:dateLastUpdated "<%=lr %>";<% end %>
<% if check(edat) %>  dcterms:created "<%=edat %>";<% end %>
<% if check(ir_list) %>
  dcterms:contributor[
     a olo:OrderedList ;
     olo:length <%=ir_list.size%>;
     olo:slot<% ir_list.each_with_index do |ir_info , index| %>[
       olo:index <%=ir_info.index%>;
       olo:item[
         a foaf:Person;
         foaf:name "<%=c ir_info.lname%> <%=c ir_info.init%>";
         foaf:firstName "<%=c ir_info.fname%>";
         foaf:LastName "<%=c ir_info.lname%>"<% if check(ir_info.irad) %>;
         org:memberOf "<%=c ir_info.irad%>"<% end %>
       ] 
<%if index == ir_list.size - 1  %>    ]<% else %>    ],<% end %><% end %>
  ].
<%end%>
<% if check(is_p) %>  prism:ISSN "<%=is_p %>";<% end %>
<% if check(is_e) %>  prism:eISSN "<%=is_e %>";<% end %>
<% if check(is_l) %>  fabio:hasIssnL "<%=is_l %>";<% end %>
<% if check(ip) %>  bibo:issue "<%=ip %>";<% end %>
<% if check(ta) %>  fabio:hasNLMJournalTitleAbbreviation "<%=ta %>";<% end %>
<% if check(jt) %>  prism:publicationName "<%=jt %>";<% end %>
<% if check(la) %>  dcterms:language "<%=la %>";<% end %>
<% if check(jid) %>  fabio:hasNationalLibraryOfMedicineJournalId "<%=jid %>";<% end %>
<% if check(oci) %>  dcterms:rightsHolder "<%=oci %>";<% end %>
<% if check(own) %>  pav:derivedFrom "<%=own %>";<% end %>
<% if check(pg) %>  pg "<%=pg %>";<% end %>
<% if check(pg_st) %>  prism:startingPage "<%=pg_st %>";<% end %>
<% if check(pg_en) %>  prism:endingPage "<%=pg_en %>";<% end %>
<% if check(pl) %>  fabio:hasPlaceOfPublication "<%=pl %>";<% end %>
<% rn.each do |elm| %>
  rdfs:seeAlso "<%= elm %>";
<%end%>
<% nm.each do |elm| %>
  rdfs:seeAlso "<%= elm %>";
<%end%>
<% if check(so) %>  dcterms:source "<%=c so %>";<% end %>
<% if check(ti) %>  dcterms:title "<%=c ti %>";<% end %>
<% if check(vi) %>  bibo:volume "<%=c vi %>" <% end %>.
  

